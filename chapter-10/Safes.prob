parser_version('2018-03-15 10:38:02.795').
classical_b('Safes',['/Users/alice/Development/B-Method/b-method-exercises/chapter-10/Safes.mch','/Users/alice/Development/B-Method/b-method-exercises/chapter-10/Locks.mch','/Users/alice/Development/B-Method/b-method-exercises/chapter-10/Doors.mch','/Users/alice/Development/B-Method/b-method-exercises/chapter-10/Keys.mch']).
machine(abstract_machine(pos(198,3,1,1,15,4),machine(pos(199,3,1,1,1,8)),machine_header(pos(200,3,1,9,1,14),'Doors',[]),[sets(pos(201,3,2,1,2,38),[deferred_set(pos(202,3,2,6,2,10),'DOOR'),enumerated_set(pos(203,3,2,13,2,38),'POSITION',[identifier(pos(204,3,2,25,2,29),open),identifier(pos(205,3,2,31,2,37),closed)])]),variables(pos(206,3,3,1,3,19),[identifier(pos(207,3,3,11,3,19),position)]),invariant(pos(208,3,4,1,4,39),member(pos(209,3,4,11,4,39),identifier(pos(210,3,4,11,4,19),position),total_function(pos(211,3,4,22,4,39),identifier(pos(212,3,4,22,4,26),'DOOR'),identifier(pos(213,3,4,31,4,39),'POSITION')))),initialisation(pos(214,3,5,1,5,43),assign(pos(215,3,5,16,5,43),[identifier(pos(216,3,5,16,5,24),position)],[mult_or_cart(pos(217,3,5,28,5,43),identifier(pos(218,3,5,28,5,32),'DOOR'),set_extension(pos(219,3,5,35,5,43),[identifier(pos(220,3,5,36,5,42),closed)]))])),operations(pos(221,3,6,1,14,12),[operation(pos(222,3,7,5,10,12),identifier(pos(222,3,7,5,10,12),opening),[],[identifier(pos(223,3,7,13,7,15),dd)],precondition(pos(224,3,8,9,10,12),member(pos(225,3,8,13,8,22),identifier(pos(226,3,8,13,8,15),dd),identifier(pos(227,3,8,18,8,22),'DOOR')),assign(pos(228,3,9,14,9,34),[function(pos(229,3,9,14,9,25),identifier(pos(230,3,9,14,9,22),position),[identifier(pos(231,3,9,23,9,25),dd)])],[identifier(pos(232,3,9,30,9,34),open)]))),operation(pos(233,3,11,5,14,12),identifier(pos(233,3,11,5,14,12),closedoor),[],[identifier(pos(234,3,11,15,11,17),dd)],precondition(pos(235,3,12,9,14,12),member(pos(236,3,12,13,12,22),identifier(pos(237,3,12,13,12,15),dd),identifier(pos(238,3,12,18,12,22),'DOOR')),assign(pos(239,3,13,14,13,36),[function(pos(240,3,13,14,13,25),identifier(pos(241,3,13,14,13,22),position),[identifier(pos(242,3,13,23,13,25),dd)])],[identifier(pos(243,3,13,30,13,36),closed)])))])])).
machine(abstract_machine(pos(245,4,1,1,15,4),machine(pos(246,4,1,1,1,8)),machine_header(pos(247,4,1,9,1,13),'Keys',[]),[sets(pos(248,4,2,1,2,9),[deferred_set(pos(249,4,2,6,2,9),'KEY')]),variables(pos(250,4,3,1,3,15),[identifier(pos(251,4,3,11,3,15),keys)]),invariant(pos(252,4,4,1,4,22),subset(pos(253,4,4,11,4,22),identifier(pos(254,4,4,11,4,15),keys),identifier(pos(255,4,4,19,4,22),'KEY'))),initialisation(pos(256,4,5,1,5,26),assign(pos(257,4,5,16,5,26),[identifier(pos(258,4,5,16,5,20),keys)],[empty_set(pos(259,4,5,24,5,26))])),operations(pos(260,4,6,1,14,5),[operation(pos(261,4,7,1,10,5),identifier(pos(261,4,7,1,10,5),insertkey),[],[identifier(pos(262,4,7,11,7,13),kk)],precondition(pos(263,4,8,2,10,5),member(pos(264,4,8,6,8,14),identifier(pos(265,4,8,6,8,8),kk),identifier(pos(266,4,8,11,8,14),'KEY')),assign(pos(267,4,9,7,9,27),[identifier(pos(268,4,9,7,9,11),keys)],[union(pos(269,4,9,15,9,27),identifier(pos(270,4,9,15,9,19),keys),set_extension(pos(271,4,9,23,9,27),[identifier(pos(272,4,9,24,9,26),kk)]))]))),operation(pos(273,4,11,1,14,5),identifier(pos(273,4,11,1,14,5),removekey),[],[identifier(pos(274,4,11,11,11,13),kk)],precondition(pos(275,4,12,2,14,5),member(pos(276,4,12,6,12,14),identifier(pos(277,4,12,6,12,8),kk),identifier(pos(278,4,12,11,12,14),'KEY')),assign(pos(279,4,13,7,13,26),[identifier(pos(280,4,13,7,13,11),keys)],[minus_or_set_subtract(pos(281,4,13,15,13,26),identifier(pos(282,4,13,15,13,19),keys),set_extension(pos(283,4,13,22,13,26),[identifier(pos(284,4,13,23,13,25),kk)]))])))])])).
machine(abstract_machine(pos(115,2,1,1,21,4),machine(pos(116,2,1,1,1,8)),machine_header(pos(117,2,1,9,1,14),'Locks',[]),[includes(pos(118,2,2,1,2,15),[machine_reference(pos(119,2,2,10,2,15),'Doors',[])]),promotes(pos(120,2,3,1,3,19),[identifier(pos(121,2,3,10,3,19),closedoor)]),sets(pos(122,2,4,1,4,30),[enumerated_set(pos(123,2,4,6,4,30),'STATUS',[identifier(pos(124,2,4,14,4,20),locked),identifier(pos(125,2,4,21,4,29),unlocked)])]),variables(pos(126,2,5,1,5,17),[identifier(pos(127,2,5,11,5,17),status)]),invariant(pos(128,2,6,1,6,78),conjunct(pos(129,2,6,11,6,78),member(pos(130,2,6,11,6,35),identifier(pos(131,2,6,11,6,17),status),total_function(pos(132,2,6,20,6,35),identifier(pos(133,2,6,20,6,24),'DOOR'),identifier(pos(134,2,6,29,6,35),'STATUS'))),subset(pos(135,2,6,38,6,78),image(pos(136,2,6,38,6,55),reverse(pos(137,2,6,38,6,47),identifier(pos(138,2,6,38,6,46),position)),set_extension(pos(139,2,6,48,6,54),[identifier(pos(140,2,6,49,6,53),open)])),image(pos(141,2,6,59,6,78),reverse(pos(142,2,6,59,6,66),identifier(pos(143,2,6,59,6,65),status)),set_extension(pos(144,2,6,67,6,77),[identifier(pos(145,2,6,68,6,76),unlocked)]))))),initialisation(pos(146,2,7,1,7,41),assign(pos(147,2,7,16,7,41),[identifier(pos(148,2,7,16,7,22),status)],[mult_or_cart(pos(149,2,7,26,7,41),identifier(pos(150,2,7,26,7,30),'DOOR'),set_extension(pos(151,2,7,33,7,41),[identifier(pos(152,2,7,34,7,40),locked)]))])),operations(pos(153,2,8,1,20,5),[operation(pos(154,2,9,1,12,5),identifier(pos(154,2,9,1,12,5),opendoor),[],[identifier(pos(155,2,9,10,9,12),dd)],precondition(pos(156,2,10,2,12,5),conjunct(pos(157,2,10,6,10,39),member(pos(158,2,10,6,10,15),identifier(pos(159,2,10,6,10,8),dd),identifier(pos(160,2,10,11,10,15),'DOOR')),equal(pos(161,2,10,18,10,39),function(pos(162,2,10,18,10,28),identifier(pos(163,2,10,18,10,24),status),[identifier(pos(164,2,10,25,10,27),dd)]),identifier(pos(165,2,10,31,10,39),unlocked))),operation_call(pos(166,2,11,7,11,14),identifier(pos(167,2,11,7,11,14),opening),[],[identifier(pos(168,2,11,15,11,17),dd)]))),operation(pos(169,2,13,1,16,5),identifier(pos(169,2,13,1,16,5),unlockdoor),[],[identifier(pos(170,2,13,12,13,14),dd)],precondition(pos(171,2,14,2,16,5),member(pos(172,2,14,6,14,15),identifier(pos(173,2,14,6,14,8),dd),identifier(pos(174,2,14,11,14,15),'DOOR')),assign(pos(175,2,15,7,15,29),[function(pos(176,2,15,7,15,16),identifier(pos(177,2,15,7,15,13),status),[identifier(pos(178,2,15,14,15,16),dd)])],[identifier(pos(179,2,15,21,15,29),unlocked)]))),operation(pos(180,2,17,1,20,5),identifier(pos(180,2,17,1,20,5),lockdoor),[],[identifier(pos(181,2,17,10,17,12),dd)],precondition(pos(182,2,18,2,20,5),conjunct(pos(183,2,18,6,18,39),member(pos(184,2,18,6,18,15),identifier(pos(185,2,18,6,18,8),dd),identifier(pos(186,2,18,11,18,15),'DOOR')),equal(pos(187,2,18,18,18,39),function(pos(188,2,18,18,18,30),identifier(pos(189,2,18,18,18,26),position),[identifier(pos(190,2,18,27,18,29),dd)]),identifier(pos(191,2,18,33,18,39),closed))),assign(pos(192,2,19,7,19,27),[function(pos(193,2,19,7,19,16),identifier(pos(194,2,19,7,19,13),status),[identifier(pos(195,2,19,14,19,16),dd)])],[identifier(pos(196,2,19,21,19,27),locked)])))])])).
machine(abstract_machine(pos(1,1,1,1,24,4),machine(pos(2,1,1,1,1,8)),machine_header(pos(3,1,1,9,1,14),'Safes',[]),[includes(pos(4,1,2,1,2,21),[machine_reference(pos(5,1,2,10,2,15),'Locks',[]),machine_reference(pos(6,1,2,17,2,21),'Keys',[])]),promotes(pos(7,1,3,1,3,39),[identifier(pos(8,1,3,10,3,18),opendoor),identifier(pos(9,1,3,20,3,29),closedoor),identifier(pos(10,1,3,31,3,39),lockdoor)]),constants(pos(11,1,4,1,4,18),[identifier(pos(12,1,4,11,4,18),unlocks)]),properties(pos(13,1,5,1,5,35),member(pos(14,1,5,12,5,35),identifier(pos(15,1,5,12,5,19),unlocks),total_bijection(pos(16,1,5,22,5,35),identifier(pos(17,1,5,22,5,25),'KEY'),identifier(pos(18,1,5,31,5,35),'DOOR')))),invariant(pos(19,1,6,1,6,47),subset(pos(20,1,6,11,6,47),image(pos(21,1,6,11,6,30),reverse(pos(22,1,6,11,6,18),identifier(pos(23,1,6,11,6,17),status)),set_extension(pos(24,1,6,19,6,29),[identifier(pos(25,1,6,20,6,28),unlocked)])),image(pos(26,1,6,34,6,47),identifier(pos(27,1,6,34,6,41),unlocks),identifier(pos(28,1,6,42,6,46),keys)))),operations(pos(29,1,7,1,23,5),[operation(pos(30,1,8,1,11,5),identifier(pos(30,1,8,1,11,5),insert),[],[identifier(pos(31,1,8,8,8,10),kk),identifier(pos(32,1,8,11,8,13),dd)],precondition(pos(33,1,9,2,11,5),conjunct(pos(34,1,9,6,9,45),conjunct(pos(35,1,9,6,9,26),member(pos(36,1,9,6,9,14),identifier(pos(37,1,9,6,9,8),kk),identifier(pos(38,1,9,11,9,14),'KEY')),member(pos(39,1,9,17,9,26),identifier(pos(40,1,9,17,9,19),dd),identifier(pos(41,1,9,22,9,26),'DOOR'))),equal(pos(42,1,9,29,9,45),function(pos(43,1,9,29,9,40),identifier(pos(44,1,9,29,9,36),unlocks),[identifier(pos(45,1,9,37,9,39),kk)]),identifier(pos(46,1,9,43,9,45),dd))),operation_call(pos(47,1,10,7,10,16),identifier(pos(48,1,10,7,10,16),insertkey),[],[identifier(pos(49,1,10,17,10,19),kk)]))),operation(pos(50,1,12,1,15,5),identifier(pos(50,1,12,1,15,5),extract),[],[identifier(pos(51,1,12,9,12,11),kk),identifier(pos(52,1,12,12,12,14),dd)],precondition(pos(53,1,13,2,15,5),conjunct(pos(54,1,13,6,13,67),conjunct(pos(55,1,13,6,13,45),conjunct(pos(56,1,13,6,13,26),member(pos(57,1,13,6,13,14),identifier(pos(58,1,13,6,13,8),kk),identifier(pos(59,1,13,11,13,14),'KEY')),member(pos(60,1,13,17,13,26),identifier(pos(61,1,13,17,13,19),dd),identifier(pos(62,1,13,22,13,26),'DOOR'))),equal(pos(63,1,13,29,13,45),function(pos(64,1,13,29,13,40),identifier(pos(65,1,13,29,13,36),unlocks),[identifier(pos(66,1,13,37,13,39),kk)]),identifier(pos(67,1,13,43,13,45),dd))),equal(pos(68,1,13,48,13,67),function(pos(69,1,13,48,13,58),identifier(pos(70,1,13,48,13,54),status),[identifier(pos(71,1,13,55,13,57),dd)]),identifier(pos(72,1,13,61,13,67),locked))),operation_call(pos(73,1,14,7,14,16),identifier(pos(74,1,14,7,14,16),removekey),[],[identifier(pos(75,1,14,17,14,19),kk)]))),operation(pos(76,1,16,1,19,5),identifier(pos(76,1,16,1,19,5),unlock),[],[identifier(pos(77,1,16,8,16,10),dd)],precondition(pos(78,1,17,2,19,5),conjunct(pos(79,1,17,6,17,37),member(pos(80,1,17,6,17,15),identifier(pos(81,1,17,6,17,8),dd),identifier(pos(82,1,17,11,17,15),'DOOR')),member(pos(83,1,17,18,17,37),function(pos(84,1,17,18,17,30),reverse(pos(85,1,17,18,17,26),identifier(pos(86,1,17,18,17,25),unlocks)),[identifier(pos(87,1,17,27,17,29),dd)]),identifier(pos(88,1,17,33,17,37),keys))),operation_call(pos(89,1,18,7,18,17),identifier(pos(90,1,18,7,18,17),unlockdoor),[],[identifier(pos(91,1,18,18,18,20),dd)]))),operation(pos(92,1,20,1,23,5),identifier(pos(92,1,20,1,23,5),quicklock),[],[identifier(pos(93,1,20,11,20,13),dd)],precondition(pos(94,1,21,2,23,5),conjunct(pos(95,1,21,6,21,39),member(pos(96,1,21,6,21,15),identifier(pos(97,1,21,6,21,8),dd),identifier(pos(98,1,21,11,21,15),'DOOR')),equal(pos(99,1,21,18,21,39),function(pos(100,1,21,18,21,30),identifier(pos(101,1,21,18,21,26),position),[identifier(pos(102,1,21,27,21,29),dd)]),identifier(pos(103,1,21,33,21,39),closed))),parallel(pos(104,1,22,7,22,45),[operation_call(pos(105,1,22,7,22,15),identifier(pos(106,1,22,7,22,15),lockdoor),[],[identifier(pos(107,1,22,16,22,18),dd)]),operation_call(pos(108,1,22,23,22,32),identifier(pos(109,1,22,23,22,32),removekey),[],[function(pos(110,1,22,33,22,45),reverse(pos(111,1,22,33,22,41),identifier(pos(112,1,22,33,22,40),unlocks)),[identifier(pos(113,1,22,42,22,44),dd)])])])))])])).
